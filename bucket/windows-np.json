{
    "version":  "0.5.1",
    "description" : "Pangolin VPN client for Windows devices",
    "homepage": "https://github.com/fosrl/windows",
    "license":  "AGPL-3.0",
    "architecture": {
        "64bit": {
            "url": "https://github.com/fosrl/windows/releases/download/0.5.1/pangolin-amd64-0.5.1.msi#/setup.msi_",
            "hash": "f879ab1dacd2f85e5ca995df382ff42f98c559788e7f0e294c816d71a22eb07e"
        }
    },
    "installer": {
        "script": [
            "if (!(is_admin)) {",
            "    error \"Administrator rights are required to install $app.\"",
            "    break",
            "}",
            "",
            "Invoke-ExternalCommand msiexec -ArgumentList @('/i', \"$dir\\setup.msi_\", '/qn', '/norestart') | Out-Null"
        ]
    },
    "uninstaller": {
        "script": [
            "if (!(is_admin)) {",
            "    error \"Administrator rights are required to install $app.\"",
            "    break",
            "}",
            "",
            "$procs = Get-Process -ErrorAction SilentlyContinue | Where-Object { $_.ProcessName -match 'pangolin' }",
            "if ($procs) {",
            "    foreach ($p in $procs) {",
            "        try {",
            "            Stop-Process -Id $p.Id -Force -ErrorAction SilentlyContinue",
            "        } catch { }",
            "    }",
            "}",
            "Invoke-ExternalCommand msiexec -ArgumentList @('/x', \"$dir\\setup.msi_\", '/qn', '/norestart') -RunAs | Out-Null"
        ]
    },
    "checkver": "github",
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://github.com/fosrl/windows/releases/download/$version/pangolin-amd64-$version.msi#/setup.msi_"
            }
        },
        "hash": {
            "url": "$url.sha256"
        }
    }
}
