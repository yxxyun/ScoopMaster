{
    "version": "1.9.11.2",
    "description": "(Beta version) A powerful screenshot tool with Annotation,Pin to Screen, Scroll Screenshot, OCR and GIF features.",
    "homepage": "https://pixpinapp.com/",
    "license": "Proprietary",
    "url": "https://download.pixpinapp.com/PixPin_1.9.11.2.zip",
    "hash": "c8433d5ae0151a3c7eef4affd6c98a5f812fe1a7f31611fba5f84f2c65bf2ee2",
    "extract_dir": "PixPin",
    "bin": [
        [
            "PixPin.exe",
            "pixpin"
        ]
    ],
    "shortcuts": [
        [
            "PixPin.exe",
            "PixPin"
        ]
    ],
    "persist": [
        "Config",
        "Data",
        "History",
        "ConfigurationWindowConfig.ini",
        "LocalStorage.data",
        "LoginData",
        "pixpin.log"
    ],
    "pre_install": [
        "Import-Module $(Join-Path $(Find-BucketDirectory -Root -Name air) scripts/AirUtils.psm1)",
        "EnsureFile @(",
        "    \"$persist_dir\\ConfigurationWindowConfig.ini\",",
        "    \"$persist_dir\\LocalStorage.data\",",
        "    \"$persist_dir\\LoginData\",",
        "    \"$persist_dir\\pixpin.log\"",
        ")",
        "Remove-Module -Name AirUtils"
    ],
    "checkver": {
        "script": [
            "$timestamp = [DateTimeOffset]::UtcNow.ToUnixTimeMilliseconds()",
            "$url = \"https://api.viewdepth.cn/app_info?app_id=pixpin&update_type=1&sys=win&ts=$timestamp\"",
            "$response = Invoke-WebRequest -Uri $url | ConvertFrom-Json",
            "return $response.ver_info.version"
        ],
        "regex": "(.*)"
    },
    "autoupdate": {
        "url": "https://download.pixpinapp.com/PixPin_$version.zip",
        "hash": {
            "url": "https://pixpinapp.com/change-log/$majorVersion.$minorVersion.$patchVersion",
            "regex": "<strong>Windows便携版</strong>:\\s+$sha1"
        }
    }
}
