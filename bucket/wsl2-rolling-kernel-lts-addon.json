{
    "version": "6.18.9",
    "description": "Rolling Release LTS Kernel Addon Packages (Modules, Headers, Docs) for Windows Subsystem for Linux2 (WSL2)",
    "homepage": "https://github.com/Nevuly/WSL2-Linux-Kernel-Rolling-LTS",
    "license": "GPL-2.0",
    "notes": "This kernel addon package require WSL v2.5.1 or later",
    "architecture": {
        "64bit": {
            "url": "https://github.com/Nevuly/WSL2-Linux-Kernel-Rolling-LTS/releases/download/linux-wsl-lts-6.18.9/bzImage-x86_64-addon.vhdx",
            "hash": "10f3d85587197c40a2c0d5dd2c3dab2a805ff6a4f9c88b86756be7e6a42aab8c",
            "post_install": [
                "##########################################################",
                "# Set WSL2 rolling kernel addon packages in `.wslconfig` #",
                "#               Channel: LTS | Arch: x86_64              #",
                "##########################################################",
                "$ini = Add-Type -memberDefinition @\"",
                "[DllImport(\"Kernel32\")]",
                "public static extern long WritePrivateProfileString (string section, string key, string val, string filePath);",
                "\"@ -passthru -name WSL2RollingKernelAddonPackageInstall -UsingNamespace System.Text",
                "$kernel_addon_path=\"$original_dir\\bzImage-x86_64-addon.vhdx\" -replace \"\\\\\", \"\\\\\" # double all back-slashess",
                "$null = $ini::WritePrivateProfileString(\"wsl2\", \"kernelModules\", $kernel_addon_path, \"$env:USERPROFILE\\.wslconfig\")"
            ],
            "post_uninstall": [
                "#############################################################",
                "# Remove WSL2 rolling kernel addon packages in `.wslconfig` #",
                "#############################################################",
                "$ini = Add-Type -memberDefinition @\"",
                "[DllImport(\"Kernel32\")]",
                "public static extern long WritePrivateProfileString (string section, string key, string val, string filePath);",
                "\"@ -passthru -name WSL2RollingKernelAddonPackageUninstall -UsingNamespace System.Text",
                "$null = $ini::WritePrivateProfileString(\"wsl2\", \"kernelModules\", $null, \"$env:USERPROFILE\\.wslconfig\")"
            ]
        },
        "arm64": {
            "url": "https://github.com/Nevuly/WSL2-Linux-Kernel-Rolling-LTS/releases/download/linux-wsl-lts-6.18.9/Image-arm64-addon.vhdx",
            "hash": "ce30e95e7754a02eec21d3d4be119d942e34296b4a36d1c9624a991bb4db45ed",
            "post_install": [
                "##########################################################",
                "# Set WSL2 rolling kernel addon packages in `.wslconfig` #",
                "#               Channel: LTS | Arch: arm64               #",
                "##########################################################",
                "$ini = Add-Type -memberDefinition @\"",
                "[DllImport(\"Kernel32\")]",
                "public static extern long WritePrivateProfileString (string section, string key, string val, string filePath);",
                "\"@ -passthru -name WSL2RollingKernelAddonPackageInstall -UsingNamespace System.Text",
                "$kernel_addon_path=\"$original_dir\\Image-arm64-addon.vhdx\" -replace \"\\\\\", \"\\\\\" # double all back-slashess",
                "$null = $ini::WritePrivateProfileString(\"wsl2\", \"kernelModules\", $kernel_addon_path, \"$env:USERPROFILE\\.wslconfig\")"
            ],
            "post_uninstall": [
                "#############################################################",
                "# Remove WSL2 rolling kernel addon packages in `.wslconfig` #",
                "#############################################################",
                "$ini = Add-Type -memberDefinition @\"",
                "[DllImport(\"Kernel32\")]",
                "public static extern long WritePrivateProfileString (string section, string key, string val, string filePath);",
                "\"@ -passthru -name WSL2RollingKernelAddonPackageUninstall -UsingNamespace System.Text",
                "$null = $ini::WritePrivateProfileString(\"wsl2\", \"kernelModules\", $null, \"$env:USERPROFILE\\.wslconfig\")"
            ]
        }
    },
    "checkver": {
        "url": "https://github.com/Nevuly/WSL2-Linux-Kernel-Rolling-LTS/releases/latest",
        "regex": "linux-wsl-lts-([\\d.]+)"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://github.com/Nevuly/WSL2-Linux-Kernel-Rolling-LTS/releases/download/linux-wsl-lts-$version/bzImage-x86_64-addon.vhdx"
            },
            "arm64": {
                "url": "https://github.com/Nevuly/WSL2-Linux-Kernel-Rolling-LTS/releases/download/linux-wsl-lts-$version/Image-arm64-addon.vhdx"
            }
        }
    }
}
