{
    "version": "2.7.2",
    "description": "A simple server for sending and receiving messages in real-time per WebSocket, with a sleek web UI",
    "homepage": "https://gotify.net/",
    "license": "MIT",
    "notes": "Get gotify default configuration by running: \"$dir\\get_default_config.ps1\"",
    "architecture": {
        "64bit": {
            "url": "https://github.com/gotify/server/releases/download/v2.7.2/gotify-windows-amd64.exe.zip",
            "hash": "de3249274042817c3379ae7e44ffc10ade8310b57ca7347e38787c89be960e53"
        },
        "32bit": {
            "url": "https://github.com/gotify/server/releases/download/v2.7.2/gotify-windows-386.exe.zip",
            "hash": "50e67d99257a1af3396d95c5101afb0bc2db23c41e979a27a618ce4c91d6d2d0"
        }
    },
    "pre_install": [
        "Get-ChildItem \"$dir\\gotify-windows-*\" | Rename-Item -NewName gotify.exe",
        "$content = \"Push-Location `\"`$PSScriptRoot`\"; try { & .\\gotify.exe } finally { Pop-Location }\"",
        "Set-Content \"$dir\\gotify.ps1\" \"$content\" -Encoding Ascii",
        "$configFile = \"$persist_dir\\config.yml\"",
        "New-Item -Path \"$configFile\" -ItemType File -ErrorAction SilentlyContinue",
        "$configUrl = \"https://raw.githubusercontent.com/gotify/server/master/config.example.yml\"",
        "if ((Get-Content -Path \"$configUrl\" -ErrorAction SilentlyContinue | Measure-Object -Line).Lines -eq 0) {",
        "    try {",
        "        Invoke-WebRequest -Uri \"$configUrl\" -OutFile \"$configFile\"",
        "        Write-Output ''",
        "        info \"Default configuration retrieved successfully.\"",
        "    } catch {",
        "        New-Item -Path \"$configFile\" -ItemType File -Force | Out-Null",
        "        Write-Output ''",
        "        warn \"Failed to retrieve default configuration. Please take action based on the Notes prompt.\"",
        "    }",
        "}"
    ],
    "post_install": [
        "$configUrl = \"https://raw.githubusercontent.com/gotify/server/master/config.example.yml\"",
        "$content = \"Invoke-WebRequest $configUrl -OutFile `\"`$PSScriptRoot\\config.yml`\"\"",
        "Set-Content \"$dir\\get_default_config.ps1\" $content -Encoding Ascii"
    ],
    "bin": "gotify.ps1",
    "persist": [
        "data",
        "config.yml"
    ],
    "checkver": {
        "github": "https://github.com/gotify/server/"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://github.com/gotify/server/releases/download/v$version/gotify-windows-amd64.exe.zip"
            },
            "32bit": {
                "url": "https://github.com/gotify/server/releases/download/v$version/gotify-windows-386.exe.zip"
            }
        }
    }
}
