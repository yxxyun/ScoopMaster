{
    "version": "1.1.0.10350633",
    "description": "腾讯云代码助手 CodeBuddy - AI 时代的智能编程伙伴，集成设计到开发的全栈 IDE",
    "homepage": "https://www.codebuddy.ai/",
    "license": {
        "identifier": "Proprietary",
        "url": "https://www.codebuddy.ai/genie/document/privacyPolicy"
    },
    "notes": [
        "CodeBuddy 是腾讯云推出的 AI 驱动的全栈开发 IDE，主要功能：",
        "- AI 代码补全：智能实时代码预测和自动补全",
        "- AI 设计生成：将手绘概念转换为高保真交互原型",
        "- 设计转代码：将 Figma 设计转换为生产就绪代码",
        "- AI 全栈开发：多文件代码生成和重构的完整软件开发代理",
        "- 内置 BaaS 集成：零配置 Supabase 集成，提供即时数据库和身份验证",
        "- 一键部署：从开发到实时演示，秒级完成",
        "",
        "首次使用需要登录腾讯云账号并获取邀请码。",
        "邀请码申请：https://wj.qq.com/s2/22240515/0ac5"
    ],
    "architecture": {
        "64bit": {
            "url": "https://codebuddy-1328495429.cos.accelerate.myqcloud.com/aiide/win32-x64-user/CodeBuddy-win32-x64-user-1.1.0.10350633-496055721-89953af7.exe",
            "hash": "8410621d1e4554ada9ab296b6fe087238cfb749587d6bda87edc48613bba10b0"
        }
    },
    "innosetup": true,
    "extract_dir": "{code_GetDestDir}",
    "shortcuts": [
        [
            "CodeBuddy.exe",
            "CodeBuddy"
        ]
    ],
    "post_install": [
        "$persistDir = $persist_dir",
        "function Ensure-PortableDirectory { param([string]$Path) if (-not (Test-Path $Path)) { New-Item -ItemType Directory -Path $Path -Force | Out-Null } }",
        "function New-PortableSymlink { param([string]$Link,[string]$Target) if (Test-Path $Link) { Remove-Item $Link -Force -Recurse -ErrorAction SilentlyContinue } New-Item -ItemType SymbolicLink -Path $Link -Target $Target -Force | Out-Null }",
        "$homeConfig = Join-Path $persistDir 'home\\config'",
        "$roamingDir = Join-Path $persistDir 'roaming'",
        "$extensionsDir = Join-Path $persistDir 'local\\extensions'",
        "Ensure-PortableDirectory $homeConfig",
        "Ensure-PortableDirectory $roamingDir",
        "Ensure-PortableDirectory $extensionsDir",
        "$legacyData = Join-Path $dir 'data'",
        "if (Test-Path $legacyData) {",
        "  $legacyRoaming = Join-Path $legacyData 'user-data'",
        "  if (Test-Path $legacyRoaming) { Copy-Item \"$legacyRoaming\\*\" $roamingDir -Force -Recurse -ErrorAction SilentlyContinue }",
        "  $legacyExtensions = Join-Path $legacyData 'extension-data'",
        "  if (Test-Path $legacyExtensions) { Copy-Item \"$legacyExtensions\\*\" $extensionsDir -Force -Recurse -ErrorAction SilentlyContinue }",
        "  $legacyHome = Join-Path $legacyData 'codebuddy-config'",
        "  if (Test-Path $legacyHome) { Copy-Item \"$legacyHome\\*\" $homeConfig -Force -Recurse -ErrorAction SilentlyContinue }",
        "  Remove-Item $legacyData -Recurse -Force -ErrorAction SilentlyContinue",
        "}",
        "$appDataPath = Join-Path $env:AppData 'CodeBuddy'",
        "if (Test-Path $appDataPath) {",
        "  if (-not (Get-Item $appDataPath).LinkType) { Copy-Item \"$appDataPath\\*\" $roamingDir -Force -Recurse -ErrorAction SilentlyContinue }",
        "  Remove-Item $appDataPath -Recurse -Force -ErrorAction SilentlyContinue",
        "}",
        "New-PortableSymlink $appDataPath $roamingDir",
        "$localAppDataPath = Join-Path $env:LocalAppData 'CodeBuddyExtension'",
        "if (Test-Path $localAppDataPath) {",
        "  if (-not (Get-Item $localAppDataPath).LinkType) { Copy-Item \"$localAppDataPath\\*\" $extensionsDir -Force -Recurse -ErrorAction SilentlyContinue }",
        "  Remove-Item $localAppDataPath -Recurse -Force -ErrorAction SilentlyContinue",
        "}",
        "New-PortableSymlink $localAppDataPath $extensionsDir",
        "$userProfilePath = Join-Path $env:USERPROFILE '.codebuddy'",
        "if (Test-Path $userProfilePath) {",
        "  if (-not (Get-Item $userProfilePath).LinkType) { Copy-Item \"$userProfilePath\\*\" $homeConfig -Force -Recurse -ErrorAction SilentlyContinue }",
        "  Remove-Item $userProfilePath -Recurse -Force -ErrorAction SilentlyContinue",
        "}",
        "New-PortableSymlink $userProfilePath $homeConfig"
    ],
    "pre_uninstall": [
        "$appDataPath = Join-Path $env:AppData 'CodeBuddy'",
        "if (Test-Path $appDataPath) {",
        "  Remove-Item $appDataPath -Force",
        "  info '[Portable Mode] Removed symbolic link: %APPDATA%\\CodeBuddy'",
        "}",
        "$localAppDataPath = Join-Path $env:LocalAppData 'CodeBuddyExtension'",
        "if (Test-Path $localAppDataPath) {",
        "  Remove-Item $localAppDataPath -Force",
        "  info '[Portable Mode] Removed symbolic link: %LOCALAPPDATA%\\CodeBuddyExtension'",
        "}",
        "$userProfilePath = Join-Path $env:USERPROFILE '.codebuddy'",
        "if (Test-Path $userProfilePath) {",
        "  Remove-Item $userProfilePath -Force",
        "  info '[Portable Mode] Removed symbolic link: ~/.codebuddy'",
        "}"
    ],
    "persist": "data",
    "checkver": {
        "url": "https://www.codebuddy.ai/v2/update?platform=ide-win32-x64-user",
        "jsonpath": "$.url",
        "regex": "(?<url>.*CodeBuddy-win32-x64-user-(?<version>[\\d.]+)-.*\\.exe)",
        "replace": "${version}"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "$matchUrl"
            }
        }
    }
}
