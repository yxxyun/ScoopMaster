{
    "version": "1.7.5",
    "description": "Simple and easy live streaming watching",
    "homepage": "https://github.com/xiaoyaocz/dart_simple_live",
    "license": "GPL-3.0-only",
    "architecture": {
        "64bit": {
            "url": "https://github.com/xiaoyaocz/dart_simple_live/releases/download/v1.7.5/simple_live_app-1.7.5+10705-windows.zip",
            "hash": "54ed2d6f1f0ebadfbccd540a4755f9ed173e724c367d78ca476096ed458376d5"
        }
    },
    "shortcuts": [["simple_live_app.exe", "Simple Live"]],
    "post_install": [
        "ensure \"$persist_dir\" | Out-Null",
        "$datadir = \"$env:APPDATA\\com.xycz\\simple_live_app\"",
        "if (Test-Path \"$datadir\") {",
        "    if ((Get-Item -Path \"$datadir\" -Force).Attributes -match 'ReparsePoint') { return }",
        "    Move-Item -Path \"$datadir\\*\" -Destination \"$persist_dir\" -Force | Out-Null",
        "}",
        "New-Item \"$datadir\" -ItemType Junction -Target \"$persist_dir\" | Out-Null"
    ],
    "post_uninstall": [
        "$appdir = Split-Path -Path \"$dir\" -Parent",
        "if ((Get-ChildItem -Path \"$appdir\" -Directory -Force | Measure-Object).Count -gt 2) { return }",
        "$datadir = \"$env:APPDATA\\com.xycz\"",
        "Remove-Item -Path \"$datadir\\simple_live_app\" -Recurse -Force | Out-Null",
        "if ((Get-ChildItem -Path \"$datadir\" -Force | Measure-Object).Count -eq 0) {",
        "    Remove-Item -Path \"$datadir\" -Recurse -Force | Out-Null",
        "}"
    ],
    "checkver": {
        "script": [
            "$data = (Invoke-RestMethod 'https://api.github.com/repositories/607042713/releases?per_page=7')",
            "$latest = $data | Where-Object { $_.tag_name -notlike '*tv*' } | Select-Object -First 1",
            "$name = $latest.assets.name | Where-Object { $_ -match '([\\d.]+)\\+\\d+' }  | Select-Object -First 1",
            "Write-Output \"$matches[1]\""
        ],
        "regex": "(.*)"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://github.com/xiaoyaocz/dart_simple_live/releases/download/v$version/simple_live_app-$version+$majorVersion0$minorVersion0$patchVersion-windows.zip"
            }
        }
    }
}
