{
    "version": "4c28f11",
    "homepage": "https://github.com/rime/plum",
    "description": "東風破 /plum/: Rime configuration manager and input schema repository",
    "license": "LGPL-3.0-or-later",
    "url": "https://github.com/rime/plum/archive/4c28f11f451facef809b380502874a48ba964ddb.zip",
    "hash": "6b6098f9fedf7c6e8993c9a6710cfbddb5bbb91ec9024ea1caaa8a9bb94d46fa",
    "depends": "weasel",
    "extract_dir": "plum-4c28f11f451facef809b380502874a48ba964ddb",
    "bin": "rime-install.bat",
    "persist": "scripts",
    "post_install": [
        ". \"$bucketsdir\\$bucket\\bin\\utils.ps1\"",
        "New-PersistDirectory \"$env:APPDATA\\plum\" \"$dir\"",
        "$files = Get-ChildItem -Path $dir -File -Exclude \"manifest.json\"",
        "$files += Get-ChildItem -Path \"$dir\\scripts\" -File",
        "foreach ($file in $files) {",
        "    $content = Get-Content -Path $file.FullName -Raw",
        "    $newContent = $content -replace 'https://github.com/', 'https://ghp.ci/https://github.com/' -replace \"https://raw.githubusercontent.com/\", \"https://ghp.ci/https://raw.githubusercontent.com/\"",
        "    Set-Content -Path $file.FullName -Value $newContent",
        "}"
    ],
    "pre_uninstall": [
        "$bucket = $install.bucket",
        ". \"$bucketsdir\\$bucket\\bin\\utils.ps1\"",
        "Stop-App",
        "Remove-Junction \"$env:APPDATA\\plum\""
    ],
    "checkver": {
        "url": "https://api.github.com/repos/rime/plum/commits?sha=master&per_page=1",
        "jsonpath": "$[0].sha",
        "regex": "(?<sha>(.{7}).*)"
    },
    "autoupdate": {
        "extract_dir": "plum-$matchSha",
        "url": "https://github.com/rime/plum/archive/$matchSha.zip"
    }
}
