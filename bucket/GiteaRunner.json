{
    "version": "0.2.11",
    "homepage": "https://gitea.com/gitea/act_runner",
    "license": "MIT",
    "url": "https://gitea.com/gitea/act_runner/releases/download/v0.2.11/act_runner-0.2.11-windows-amd64.exe.xz",
    "hash": "dc8047485b1a254e18c2552ed887f8c180f078c4ce4d4ee1dd94411f557d0bee",
    "suggest": {
        "NSSM": "main/nssm"
    },
    "post_install": [
        "shim \"$dir\\act_runner-$version-windows-amd64.exe\" $global act_runner",
        "if (-not (Test-Path -Path $Env:ProgramData\\act)) {",
        "   New-Item -Path $Env:ProgramData -Name 'act' -ItemType 'directory'",
        "}",
        "if (-not (Test-Path -Path $Env:ProgramData\\act\\runner.yaml)) {",
        "   $PSDefaultParameterValues['Out-File:Encoding']='utf8'",
        "   (act_runner generate-config) -Replace \" .runner\", \" $($Env:ProgramData)\\act\\.runner\" > $Env:ProgramData\\act\\runner.yaml",
        "}",
        "New-Item \"$dir\\add2service.ps1\" -Value (",
        "    \"New-Service -Name 'ActRunner' -BinaryPathName '$scoopdir\\shims\\act_runner.exe --config $Env:ProgramData\\act\\runner.yaml daemon' -StartupType Automatic -Description 'Gitea Runner Service.' -ErrorAction 'SilentlyContinue'\"",
        ") | Out-Null"
    ],
    "pre_uninstall": [
        "Remove-Item -Path \"$scoopdir\\shims\\act_runner.shim\" -Force",
        "Remove-Item -Path \"$scoopdir\\shims\\act_runner.exe\" -Force",
        "if (Get-Service -Name 'ActRunner' -ErrorAction 'SilentlyContinue') {",
        "   if (!(is_admin)) {error \"$app requires admin rights to $cmd\"; break}",
        "   Stop-Service -Name 'ActRunner' -Verbose -ErrorAction 'SilentlyContinue' -Force",
        "   sc.exe delete 'ActRunner'",
        "}",
        "if (Get-Service -Name 'act_runner' -ErrorAction 'SilentlyContinue') {",
        "   if (!(is_admin)) {error \"$app requires admin rights to $cmd\"; break}",
        "   nssm stop act_runner",
        "   mssm remove act_runner",
        "}"
    ],
    "notes": [
        "[+]Register: act_runner register --config $Env:ProgramData\\act\\runner.yaml",
        "[+]DaemonTest: act_runner daemon --config $Env:ProgramData\\act\\runner.yaml",
        "Add2Service Use Powershell: ",
        "    PowerShell.exe -ExecutionPolicy Bypass -File \"$dir\\Add2Service.ps1\"",
        "Add2Service Use NSSM: ",
        "    scoop install -g nssm",
        "    nssm install act_runner $scoopdir\\shims\\act_runner.exe  \"--config $Env:ProgramData\\act\\runner.yaml daemon\"",
        "    nssm set act_runner AppEnvironmentExtra \"DOCKER_HOST=tcp://127.0.0.1:2375\"",
        "    nssm set act_runner AppStderr $dir\\error.log",
        "    nssm set act_runner ObjectName \"NT AUTHORITY\\NetworkService\""
    ],
    "checkver": {
        "url": "https://gitea.com/gitea/act_runner/releases.rss",
        "regex": "releases/tag/v([\\d.]+)"
    },
    "autoupdate": {
        "url": "https://gitea.com/gitea/act_runner/releases/download/v$version/act_runner-$version-windows-amd64.exe.xz",
        "hash": {
            "url": "https://gitea.com/gitea/act_runner/releases/download/v$version/act_runner-$version-windows-amd64.exe.xz.sha256"
        }
    }
}
