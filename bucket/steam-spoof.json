{
    "version": "nightly",
    "description": "Gaming hardware and software store by Valve Corporation",
    "homepage": "https://store.steampowered.com/",
    "notes": "Removes steam and spoofs common identifiers after uninstall.",
    "license": {
        "identifier": "Freeware",
        "url": "https://store.steampowered.com/legal/"
    },
    "url": "https://steamcdn-a.akamaihd.net/client/installer/SteamSetup.exe#/dl.7z",
    "uninstaller": {
        "file": "uninstall.exe",
        "args": "/S"
    },
    "post_uninstall": [
      "rmdir /S \"%USERPROFILE%\\AppData\\Local\\Steam\"",
      
      "reg delete \"HKEY_CURRENT_USER\\SOFTWARE\\Valve\" /f",
      "reg delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\WOW6432Node\\Valve\" /f",
      "reg delete \"HKEY_CLASSES_ROOT\\steam\" /f",
      "reg delete \"HKEY_CLASSES_ROOT\\steamlink\" /f",
      "reg delete \"HKEY_CURRENT_USER\\SOFTWARE\\Classes\\steam\" /f",
      "reg delete \"HKEY_CURRENT_USER\\SOFTWARE\\Classes\\steamlink\" /f",
      "reg delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\steam\" /f",
      "reg delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\steamlink\" /f",
      "reg delete \"HKEY_LOCAL_MACHINE\\SYSTEM\\ControlSet001\\Services\\EventLog\\Application\\Steam Client Service\" /f",
      "reg delete \"HKEY_LOCAL_MACHINE\\SYSTEM\\ControlSet001\\Services\\Steam Client Service\" /f",
      "reg delete \"HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\EventLog\\Application\\Steam Client Service\" /f",
      "reg delete \"HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\Steam Client Service\" /f",
      
      "$newMac = ('{0:X}' -f (Get-Random -Maximum 0xFFFFFFFFFFFF)).PadLeft(12, \"0\") -replace '^(.)(.)', ('$1' + (Get-Random -InputObject 'A','E','2','6')) -replace '$', ''",
      "$adapter = (Get-NetAdapter | Where-Object {$_.Status -eq \"Up\"} | Select-Object -First 1).Name",
      "Set-NetAdapter -Name \"$adapter\" -MacAddress \"$newMac\" -Confirm:$false",

      "function Get-RandomProductId { return (-join (1..20 | ForEach {[char]((65..90) + (48..57) | Get-Random)}) -replace '(.{5})', '$1-').TrimEnd('-') }",
      "Set-ItemProperty -Path 'HKLM:\\SYSTEM\\CurrentControlSet\\Control\\IDConfigDB\\Hardware Profiles\\0001' -Name 'HwProfileGuid' -Type String -Value \"{$([guid]::NewGuid().ToString())}\" -Force",
      "Set-ItemProperty -Path 'HKLM:\\SOFTWARE\\Microsoft\\Cryptography' -Name 'MachineGuid' -Type String -Value \"$([guid]::NewGuid().ToString())\" -Force",
      "Set-ItemProperty -Path 'HKLM:\\SOFTWARE\\Microsoft\\SQMClient' -Name 'MachineId' -Type String -Value \"{$([guid]::NewGuid().ToString().ToUpper())}\" -Force",
      "Set-ItemProperty -Path 'HKLM:\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion' -Name 'ProductId' -Type String -Value \"$(Get-RandomProductId)\" -Force",

      "$RandomString = -join ([char[]](48..57 + 65..90) | Get-Random -Count 7)",
      "Rename-Computer -NewName \"DESKTOP-$RandomString\" -Force *>$null",

      "$randomDate = Get-Random -Minimum ([datetime]'2023-01-01').Ticks -Maximum (([datetime]'2025-5-10').Ticks) | ForEach-Object {[datetime]$_}",
      "$unixTimestamp = [int]($randomDate.ToUniversalTime() - [datetime]'1970-01-01').TotalSeconds",
      "$ldapFileTime = [int64](($unixTimestamp + 11644473600) * 1e7)",
      "$regPath = \"HKLM:\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\"",
      "Set-ItemProperty -Path $regPath -Name \"InstallDate\" -Value $unixTimestamp -Force",
      "Set-ItemProperty -Path $regPath -Name \"InstallTime\" -Value $ldapFileTime -Force"
    ],
    "bin": "Steam.exe",
    "shortcuts": [
        [
            "Steam.exe",
            "Steam"
        ]
    ],
    "persist": [
        "skins",
        "steamapps",
        "userdata"
    ]
}
