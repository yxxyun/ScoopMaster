{
    "version": "1.9.0",
    "description": "Zapret discord youtube",
    "homepage": "https://github.com/Flowseal/zapret-discord-youtube",
    "license": "MIT",
    "notes": "Administration rights are required for uninstall while zapret is running",
    "architecture": {
        "64bit": {
            "url": "https://github.com/Flowseal/zapret-discord-youtube/releases/download/1.9.0/zapret-discord-youtube-1.9.0.zip",
            "hash": "aee602afcfd02cf4e55efa917737f9cdfb4262e2cd24d8ced02ef27a53e44389"
        },
        "32bit": {
            "url": "https://github.com/Flowseal/zapret-discord-youtube/releases/download/1.9.0/zapret-discord-youtube-1.9.0.zip",
            "hash": "aee602afcfd02cf4e55efa917737f9cdfb4262e2cd24d8ced02ef27a53e44389"
        }
    },
    "persist": "lists",
    "checkver": {
        "url": "https://github.com/Flowseal/zapret-discord-youtube/releases/latest",
        "regex": "zapret-discord-youtube-([\\d.]+)\\.zip"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://github.com/Flowseal/zapret-discord-youtube/releases/download/$version/zapret-discord-youtube-$version.zip"
            },
            "32bit": {
                "url": "https://github.com/Flowseal/zapret-discord-youtube/releases/download/$version/zapret-discord-youtube-$version.zip"
            }
        }
    },
    "post_install": [
        "$scDir = \"$env:APPDATA\\Microsoft\\Windows\\Start Menu\\Programs\\Scoop Apps\\$app\"",
        "if (!(Test-Path $scDir)) { New-Item -ItemType Directory -Force -Path $scDir | Out-Null }",
        "Write-Host \"Generating shortcuts in $scDir...\"",
        "$WshShell = New-Object -comObject WScript.Shell",
        "Get-ChildItem \"$dir\\*.bat\" | ForEach-Object {",
        "    $shortcut = $WshShell.CreateShortcut(\"$scDir\\$($_.BaseName).lnk\")",
        "    $shortcut.TargetPath = $_.FullName",
        "    $shortcut.WorkingDirectory = $dir",
        "    $shortcut.Save()",
        "}"
    ],
    "pre_uninstall": [
        "if (Get-Service -Name 'zapret' -ErrorAction SilentlyContinue) { Stop-Service -Name 'zapret' -Force; sc.exe delete 'zapret' }",
        "if (Get-Process -Name 'winws' -ErrorAction SilentlyContinue) { Stop-Process -Name 'winws' -Force }",
        "if (Get-Service -Name 'WinDivert' -ErrorAction SilentlyContinue) { Stop-Service -Name 'WinDivert' -Force; sc.exe delete 'WinDivert' }",
        "$scDir = \"$env:APPDATA\\Microsoft\\Windows\\Start Menu\\Programs\\Scoop Apps\\$app\"",
        "if (Test-Path $scDir) { Remove-Item -Recurse -Force $scDir }"
    ]
}
