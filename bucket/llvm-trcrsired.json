{
    "version": "22-20251202",
    "description": "Collection of modular and reusable compiler and toolchain technologies. (trcrsired build)",
    "homepage": "https://github.com/trcrsired/llvm-releases",
    "license": "NCSA",
    "architecture": {
        "64bit": {
            "url": "https://github.com/trcrsired/llvm-releases/releases/download/llvm22-20251202/x86_64-windows-gnu.tar.xz",
            "hash": "8a9ce64c55a3f01705b3d53fd1d1776c0cd3f163b9a975b77f2623654978528f"
        }
    },
    "pre_install": [
        "if (!(is_admin)) { error 'This package requires admin rights to install'; break }",
        "$sourceDir = \"$dir\\x86_64-windows-gnu\"",
        "$destDir = \"$dir\"",
        "$subDirs = Get-ChildItem -Path $sourceDir -Directory",
        "foreach ($subDir in $subDirs) {",
        "robocopy $subDir $destDir /MOVE /E /IS /IT /SL /NFL /NDL /NJH /NJS",
        "}",
        "Remove-Item -Path $sourceDir -Recurse -Force",
        "Get-ChildItem -Path \"$dir\\lib\" -Recurse -Filter *.dll | Move-Item -Destination \"$dir\\bin\" -Force"
    ],
    "env_add_path": "bin",
    "env_set": {
        "LIBCLANG_PATH": "$dir\\bin",
        "LLVM_LIB_DIR": "$dir\\lib"
    },
    "checkver": {
        "url": "https://github.com/trcrsired/llvm-releases",
        "regex": "tag/llvm(\\d+)-(\\d+)",
        "replace": "${1}-${2}"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://github.com/trcrsired/llvm-releases/releases/download/llvm$version/x86_64-windows-gnu.tar.xz"
            }
        }
    }
}
