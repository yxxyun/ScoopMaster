{
    "version": "14.1.4",
    "description": "Rime 小狼毫配置: 万象拼音输入方案 | Rime Weasel Configuration: Wanxiang-Pinyin.",
    "homepage": "https://github.com/amzxyz/rime_wanxiang",
    "license": {
        "identifier": "CC-BY-4.0",
        "url": "https://github.com/amzxyz/rime_wanxiang/blob/main/LICENSE"
    },
    "notes": [
        "After installation, update, or uninstallation, you need to redeploy in Rime Weasel",
        "Recommended to install the Wanxiang syntax model: abyss/amzxyz.rime_wanxiang.model"
    ],
    "depends": "abyss/Rime.Weasel",
    "suggest": {
        "model": "abyss/amzxyz.rime_wanxiang.model"
    },
    "architecture": {
        "64bit": {
            "url": "https://github.com/amzxyz/rime_wanxiang/releases/download/v14.1.4/rime-wanxiang-tiger-fuzhu.zip",
            "hash": "5651f9690050390aad8f715a9a73841d6984367f7e5dc4e28f3e79e0ddc66a21"
        },
        "arm64": {
            "url": "https://github.com/amzxyz/rime_wanxiang/releases/download/v14.1.4/rime-wanxiang-tiger-fuzhu.zip",
            "hash": "5651f9690050390aad8f715a9a73841d6984367f7e5dc4e28f3e79e0ddc66a21"
        }
    },
    "extract_to": "rime_wanxiang",
    "pre_install": [
        "$bucket = if ($bucket) { $bucket } else { (scoop config).'abgox-abyss-bucket-name' }",
        ". $bucketsdir\\$bucket\\script\\utils.ps1",
        "A-Start-Install",
        "if($PSUICulture -like 'zh*') {",
        "    Write-Host \"正在将 $app 配置文件复制到 Rime.Weasel 用户文件夹中...\" -ForegroundColor Yellow",
        "}",
        "else {",
        "    Write-Host \"Copying $app configuration file to Rime.Weasel user configuration directory...\" -ForegroundColor Yellow",
        "}",
        "$RimeDir = Join-Path (Split-Path $persist_dir -Parent) 'Rime.Weasel'",
        "$RimeDataDir = \"$env:AppData\\Rime\".Replace($home,$RimeDir)",
        "Copy-Item \"$dir\\rime_wanxiang\\*\" $RimeDataDir -Recurse -Force"
    ],
    "post_install": [
        "$bucket = if ($bucket) { $bucket } else { (scoop config).'abgox-abyss-bucket-name' }",
        ". $bucketsdir\\$bucket\\script\\utils.ps1",
        "A-Complete-Install"
    ],
    "pre_uninstall": [
        "$bucket = if ($bucket) { $bucket } else { (scoop config).'abgox-abyss-bucket-name' }",
        ". $bucketsdir\\$bucket\\script\\utils.ps1",
        "A-Start-Uninstall",
        "if($PSUICulture -like 'zh*') {",
        "    Write-Host \"正在从 Rime.Weasel 用户文件夹中移除 $app 配置文件...\" -ForegroundColor Yellow",
        "}",
        "else {",
        "    Write-Host \"Removing $app configuration file from Rime.Weasel user configuration directory...\" -ForegroundColor Yellow",
        "}",
        "$RimeDir = Join-Path (Split-Path $persist_dir -Parent) 'Rime.Weasel'",
        "$RimeDataDir = \"$env:AppData\\Rime\".Replace($home,$RimeDir)",
        "(Get-ChildItem \"$dir\\rime_wanxiang\" -Recurse).FullName.Replace(\"$dir\\rime_wanxiang\", $RimeDataDir) | Remove-Item -Force -Recurse -ErrorAction SilentlyContinue"
    ],
    "post_uninstall": [
        "$bucket = if ($bucket) { $bucket } else { (scoop config).'abgox-abyss-bucket-name' }",
        ". $bucketsdir\\$bucket\\script\\utils.ps1",
        "A-Complete-Uninstall"
    ],
    "checkver": {
        "script": [
            ". $pwd\\script\\utils.ps1",
            "A-Get-VersionFromGithubAPI"
        ],
        "regex": "(.+)"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://github.com/amzxyz/rime_wanxiang/releases/download/v$version/rime-wanxiang-tiger-fuzhu.zip"
            },
            "arm64": {
                "url": "https://github.com/amzxyz/rime_wanxiang/releases/download/v$version/rime-wanxiang-tiger-fuzhu.zip"
            }
        }
    }
}
