{
    "version": "25.3.1-0",
    "description": "A conda-forge distribution",
    "homepage": "https://mirror.nju.edu.cn/github-release/conda-forge/miniforge/",
    "license": "BSD-3-Clause",
    "architecture": {
        "64bit": {
            "url": "https://mirror.nju.edu.cn/github-release/conda-forge/miniforge/LatestRelease/Miniforge3-25.3.1-0-Windows-x86_64.exe",
            "hash": "b7706a307b005fc397b70a244de19129100906928abccd5592580eb8296fb240"
        }
    },
    "pre_install": "if ($dir -match ' ') { error 'The installation directory cannot include a space'; break}",
    "installer": {
        "script": [
            "# https://github.com/ScoopInstaller/Scoop/pull/5065",
            "Import-Module $(Join-Path $bucketsdir/$bucket scripts/AppsUtils.psm1)",
            "Move-Item \"$dir\\$fname\" \"$dir\\..\\setup.exe\" | Out-Null",
            "Invoke-ExternalCommand2 -Path \"$dir\\..\\setup.exe\" -ArgumentList @('/S', '/InstallationType=JustMe', '/RegisterPython=0', '/AddToPath=0', '/NoRegistry=1', '/NoShortcuts=1', \"/D=$dir\") | Out-Null",
            "Remove-Module -Name AppsUtils"
        ]
    },
    "uninstaller": {
        "script": [
            "Import-Module $(Join-Path $bucketsdir/$bucket scripts/AppsUtils.psm1)",
            "Start-Process \"$dir\\Uninstall-Miniforge3.exe\" -ArgumentList '/S' -Wait | Out-Null",
            "Remove-Module -Name AppsUtils"
        ]
    },
    "bin": "scripts\\conda.exe",
    "post_install": [
        "Remove-Item \"$dir\\..\\setup.exe\" -Force | Out-Null",
        "# Set auto_activate_base to false",
        "(& $dir\\scripts\\conda.exe config --system --set auto_activate_base false) | Out-Null",
        "# Invoke hook for current shell session",
        "(& $dir\\scripts\\conda.exe shell.powershell hook) | Out-String | Invoke-Expression"
    ],
    "checkver": {
        "github": "https://github.com/conda-forge/miniforge",
        "regex": "tag/([\\d.-]+)"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://mirror.nju.edu.cn/github-release/conda-forge/miniforge/LatestRelease/Miniforge3-$version-Windows-x86_64.exe",
                "hash": {
                    "url": "$url.sha256"
                }
            }
        }
    },
    "env_add_path": "condabin",
    "notes": [
        "此版本不会将默认虚拟环境添加到您的PATH中，除非您使用 'conda activate base' 激活它。",
        "如果您不关心python PATH污染，可以选择安装官方bucket中的版本。",
        "",
        "Scoop不会持久化Conda基础环境，当升级应用程序时，安装到基础环境中的包将被删除。",
        "我们建议设置 'envs_dirs' 来使用独立的路径，如 '~/.conda/envs'，并避免使用基础环境。",
        "https://conda.io/projects/conda/en/latest/user-guide/configuration/use-condarc.html#specify-environment-directories-envs-dirs",
        "",
        "要启用conda自动加载的tab补全功能，您可以将以下代码添加到您的PowerShell $PROFILE中：",
        "(& conda 'shell.powershell' 'hook') | Out-String | Invoke-Expression",
        "mamba shell init --shell powershell",
        "pip 换源 (tsinghua):",
        "pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple"
    ]
}
