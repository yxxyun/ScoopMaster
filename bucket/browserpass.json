{
    "version": "3.1.2",
    "description": "Browserpass native client app",
    "homepage": "https://github.com/browserpass/browserpass-native",
    "license": "isc",
    "notes": [
        "Import by running 'regedt32 \"$dir\\register.reg\"'"
    ],
    "architecture": {
        "64bit": {
            "url": "https://github.com/browserpass/browserpass-native/releases/download/v3.1.2/browserpass-windows64-3.1.2.msi",
            "hash": "a789cb96989d537c2c50a60fd6e056e2a47541d8e7338d987637a0d0d38dbc20"
        }
    },
    "extract_dir": "PFiles/Browserpass",
    "post_install": [
        "$exePath = \"$dir\\browserpass-windows64.exe\"",
        "$chromiumPath = \"$dir\\chromium-host.json\"",
        "$firefoxPath = \"$dir\\firefox-host.json\"",
        "$chromiumJson = Get-Content \"$chromiumPath\" -Raw | ConvertFrom-Json",
        "$chromiumJson.path = \"$exePath\"",
        "$chromiumJson | ConvertTo-Json -Depth 10 | Set-Content \"$chromiumPath\" -Encoding UTF8",
        "$firefoxJson = Get-Content \"$firefoxPath\" -Raw | ConvertFrom-Json",
        "$firefoxJson.path = \"$exePath\"",
        "$firefoxJson | ConvertTo-Json -Depth 10 | Set-Content \"$firefoxPath\" -Encoding UTF8",
        "@\"",
        "Windows Registry Editor Version 5.00",
        "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Google\\Chrome\\NativeMessagingHosts\\com.github.browserpass.native]",
        "@=\"$($chromiumPath.Replace('\\', '\\\\'))\"",
        "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Mozilla\\NativeMessagingHosts\\com.github.browserpass.native]",
        "@=\"$($firefoxPath.Replace('\\', '\\\\'))\"",
        "\"@ | Out-File -FilePath \"$dir\\register.reg\" -Encoding ASCII"
    ],
    "checkver": {
        "github": "https://github.com/browserpass/browserpass-native"
    },
    "autoupdate": {
        "url": "https://github.com/browserpass/browserpass-native/releases/download/v$version/browserpass-windows64-$version.msi"
    }
}
