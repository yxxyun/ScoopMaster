{
    "homepage": "https://www.leigod.com/",
    "description": "雷神加速器：按分钟计费，时长可暂停。Leigod Online Game Accelerator",
    "version": "10.1.9.9",
    "license": {
        "identifier": "Proprietary",
        "url": "https://www.leigod.com/help/privacyAgreement.html"
    },
    "url": "https://update.leigod.com/soft/leigod/win/10.0.0.0/LeiGodSetup.10.1.9.9.exe#/setup.exe",
    "hash": "6dfb2ae527bfa1fb1cc9d049242d07de21e40a6b08f3ac3ea4467eefa57aa169",
    "shortcuts": [
        [
            "leigod.exe",
            "雷神加速器"
        ]
    ],
    "pre_install": [
        "$bucket=(scoop bucket list | where-Object { $_.Source -match 'Scoop-Store'})[0].Name",
        "Import-Module $(Join-Path $(Find-BucketDirectory -Root -Name $bucket) scripts/AirUtils.psm1)",
        "# 检测是否以管理员权限运行",
        "$isAdmin = ([Security.Principal.WindowsPrincipal] [Security.Principal.WindowsIdentity]::GetCurrent()).IsInRole([Security.Principal.WindowsBuiltInRole] 'Administrator')",
        "if (-Not $isAdmin) {",
        "    # 如果没有管理员权限，请求提升",
        "    Write-Warning '需要管理员权限来执行此操作。'",
        "    Start-Process PowerShell -Verb RunAs -ArgumentList \"-Command Set-Location '$PWD'; & { scoop install $bucket/$app }\"",
        "    exit",
        "}",
        "RedirectDirectory \"$env:APPDATA\\leigod\" \"$persist_dir\\leigod\"",
        "RedirectDirectory \"$env:USERPROFILE\\.leigod\" \"$persist_dir\\.leigod\"",
        "RedirectDirectory \"$env:PROGRAMDATA\\leigod_person_7002\" \"$persist_dir\\leigod_person_7002\"",
        "Remove-Module -Name AirUtils"
    ],
    "installer": {
        "args": [
            "/silent",
            "/norestart",
            "/s",
            "/S",
            "/q",
            "/Q",
            "/quiet",
            "/qn",
            "/SILENT"
        ]
    },
    "uninstaller": {
        "script": [
            "$p = \"$env:PROGRAMFILES (X86)\\LeiGod_Acc\\Uninstall.exe\"; Invoke-Expression \"& '$p' /currentuser /S\"",
            "if ($cmd -eq 'uninstall') {",
            "    $bucket=(scoop bucket list | where-Object { $_.Source -match 'Scoop-Store'})[0].Name",
            "    Import-Module $(Join-Path $(Find-BucketDirectory -Root -Name $bucket) scripts/AirUtils.psm1)",
            "    # 检测是否以管理员权限运行",
            "    $isAdmin = ([Security.Principal.WindowsPrincipal] [Security.Principal.WindowsIdentity]::GetCurrent()).IsInRole([Security.Principal.WindowsBuiltInRole] 'Administrator')",
            "    if (-Not $isAdmin) {",
            "        # 如果没有管理员权限，请求提升",
            "        Write-Warning '需要管理员权限来执行此操作。'",
            "        Start-Process PowerShell -Verb RunAs -ArgumentList \"-Command Set-Location '$PWD'; & { scoop install $bucket\\$app }\"",
            "        exit",
            "    }",
            "    RemoveJunction \"$env:APPDATA\\leigod\"",
            "    RemoveJunction \"$env:USERPROFILE\\.leigod\"",
            "    RemoveJunction \"$env:PROGRAMDATA\\leigod_person_7002\"",
            "    Remove-Module -Name AirUtils",
            "}"
        ]
    },
    "checkver": {
        "url": "https://www.leigod.com/configs.json",
        "jsonpath": "$.windows.download_url",
        "regex": "/win/(?<tag>[\\d.]+)/LeiGodSetup\\.([\\d.]+)\\.exe"
    },
    "autoupdate": {
        "url": "https://update.leigod.com/soft/leigod/win/$matchTag/LeiGodSetup.$version.exe#/setup.exe"
    }
}
