{
    "version": "4.8.4.2",
    "description": "A unlimited speed multifunctional remote control software",
    "homepage": "https://www.todesk.com/",
    "license": "Proprietary",
    "url": "https://dl.todesk.com/irrigation/ToDesk_4.8.4.2.exe#/dl.7z",
    "hash": "417a2ebbde7b97ac74df5726e63439715ebcc5aef3f30e7493b86fea0094ec55",
    "pre_install": [
        "if (!(Test-Path \"$persist_dir\\config.ini\")) {",
        "    New-Item -Force -Path \"$persist_dir\\config.ini\" -ItemType File -Value \"[ConfigInfo]`nautoStart=0\" | Out-Null",
        "}",
        "# 解压对应架构的7z文件",
        "if ($architecture -eq '64bit') {",
        "    Get-ChildItem \"$dir\\app64.7z\" | Expand-7zipArchive -DestinationPath \"$dir\"",
        "} else {",
        "    Get-ChildItem \"$dir\\app32.7z\" | Expand-7zipArchive -DestinationPath \"$dir\"",
        "}"
    ],
    "post_install": [
        "# 清理不必要的文件",
        "Remove-Item \"$dir\\app32.7z\", \"$dir\\app64.7z\" -Force -ErrorAction SilentlyContinue",
        "Remove-Item \"$dir\\`$PLUGINSDIR\" -Force -Recurse -ErrorAction SilentlyContinue",
        "Remove-Item \"$dir\\uninst.exe\" -Force -ErrorAction SilentlyContinue"
    ],
    "shortcuts": [
        [
            "ToDesk.exe",
            "ToDesk"
        ]
    ],
    "persist": [
        "Logs",
        "config.ini"
    ],
    "checkver": {
        "url": "https://www.todesk.com/download.html",
        "regex": "ToDesk_([\\d.]+).exe"
    },
    "autoupdate": {
        "url": "https://dl.todesk.com/irrigation/ToDesk_$version.exe#/dl.7z"
    }
}
