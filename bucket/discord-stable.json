{
    "version": "1.0.9205",
    "description": "Free Voice and Text Chat",
    "homepage": "https://discordapp.com/",
    "license": {
        "identifier": "Freeware",
        "url": "https://discordapp.com/terms"
    },
    "notes": "This manifest works around the broken Discord Updater since version 1.0.9205 by manually installing all modules.",
    "depends": [
        "brotli",
        "sqlite"
    ],
    "architecture": {
        "64bit": {
            "url": [
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9205/DiscordSetup.exe#/dl.7z",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9205/discord_krisp/1/full.distro#/discord_krisp.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9205/discord_hook/1/full.distro#/discord_hook.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9205/discord_zstd/1/full.distro#/discord_zstd.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9205/discord_notifications/1/full.distro#/discord_notifications.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9205/discord_voice/1/full.distro#/discord_voice.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9205/discord_desktop_overlay/1/full.distro#/discord_desktop_overlay.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9205/discord_media/1/full.distro#/discord_media.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9205/discord_cloudsync/1/full.distro#/discord_cloudsync.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9205/discord_vigilante/1/full.distro#/discord_vigilante.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9205/discord_voice_filters/1/full.distro#/discord_voice_filters.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9205/discord_rpc/1/full.distro#/discord_rpc.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9205/discord_erlpack/1/full.distro#/discord_erlpack.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9205/discord_desktop_core/1/full.distro#/discord_desktop_core.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9205/discord_overlay2/1/full.distro#/discord_overlay2.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9205/discord_sekrit/1/full.distro#/discord_sekrit.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9205/discord_game_utils/1/full.distro#/discord_game_utils.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9205/discord_modules/1/full.distro#/discord_modules.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9205/discord_dispatch/1/full.distro#/discord_dispatch.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9205/discord_spellcheck/1/full.distro#/discord_spellcheck.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9205/discord_utils/1/full.distro#/discord_utils.distro"
            ],
            "hash": [
                "cbb106f333319f520351e29c31ec18aa22b604ed8d9436a75ba5724afb06b580",
                "442a3d8327acab28367a7ae5b6952e91091229628b3cedb5131b6890284a00d2",
                "0605822e50f91723943576b0d58a90981c760956af4eaffd25f6871d81bf02ab",
                "aef816483d7c27b79e00119760b432198956d154f896ff569bd196e7cccc9a49",
                "e38f9cfd1303d76b3bf39f39b73ca07d4ae02a352a199d51f1ada485ab3a88f8",
                "a0392b0c78d6f5218bfb0109fb9584aad74bc676b2d0e48161a76d1c1533d506",
                "06e0163a3c31bb4b705808561040ea620d00ed66972da0adfe4e0b63a0d9b597",
                "9d9bdc666de4459faf316f4c03eef646b25c04606330b4b635853c9ac171cd72",
                "09869e9c86acdc398a0190331a55f632d28a060c0d1221c64fc17315b2ef9823",
                "7febb2b5307f6e0f0540ce3ffa5c4f8a0c5d5e694fb860e129d14d2d9364368d",
                "1df1ed1feb84bfb9fa5c2ce2e197b98d69abb3eae0a3b13682c741b9dd909242",
                "3b7b8e23ac39b629389ad8c13c0f5f795d7ad945f925becabb4479af353662ae",
                "22f00635a11764b34ef251c48ce19922a633539e2222864067266db73e35e63a",
                "534da87ef92118603e55b8dc847013cddd36656f10f8270d63d2ec5324a7cfa6",
                "3223afb5a9f3945a2a71550b4b777680bd316c5db8f3f79d21d10dca5f57cb7a",
                "14dd754389aa5e193ea2be295752c9299a7ea58c3e66a9832f09a1295c755e79",
                "a05dc4fa27740e7bd1d8fa37b218002e745a275f3db870997e5cd81609537409",
                "ac1a790f9f09a140f09906a622a9f5afeb77bc5c5c8f46a272e49f635f1692fd",
                "74d4cc0910f5b9e5d6fb291ca2ecf65f37258b4c1cff77a4ab2e1f35b5ff8c47",
                "ed829ce155e2b570d924b1f1fff9516a60b3a68d5622e11fcf4e0e8b1b87cc53",
                "47a0cc011ff29dd6bec7859911c188e81fe05fb9552b9caf5633d9eb55b2a826"
            ]
        }
    },
    "extract_to": "_tmp",
    "installer": {
        "script": [
            "# Expand Archive",
            "Expand-7zipArchive \"$dir\\_tmp\\Discord-*-full.nupkg\" -ExtractDir \"lib\\net45\" -DestinationPath \"$dir\\app-$version\" -Removal | Out-Null",
            "Remove-Item \"$dir\\_tmp\" -Force -Recurse",
            "# Move installer.db file",
            "Move-Item \"$dir\\app-$version\\installer.db\" -Destination \"$dir\\installer.db\"",
            "# Decompress",
            "brotli -d -j -o \"$dir\\discord_krisp.tar\" \"$dir\\discord_krisp.distro\"",
            "brotli -d -j -o \"$dir\\discord_hook.tar\" \"$dir\\discord_hook.distro\"",
            "brotli -d -j -o \"$dir\\discord_zstd.tar\" \"$dir\\discord_zstd.distro\"",
            "brotli -d -j -o \"$dir\\discord_notifications.tar\" \"$dir\\discord_notifications.distro\"",
            "brotli -d -j -o \"$dir\\discord_voice.tar\" \"$dir\\discord_voice.distro\"",
            "brotli -d -j -o \"$dir\\discord_desktop_overlay.tar\" \"$dir\\discord_desktop_overlay.distro\"",
            "brotli -d -j -o \"$dir\\discord_media.tar\" \"$dir\\discord_media.distro\"",
            "brotli -d -j -o \"$dir\\discord_cloudsync.tar\" \"$dir\\discord_cloudsync.distro\"",
            "brotli -d -j -o \"$dir\\discord_vigilante.tar\" \"$dir\\discord_vigilante.distro\"",
            "brotli -d -j -o \"$dir\\discord_voice_filters.tar\" \"$dir\\discord_voice_filters.distro\"",
            "brotli -d -j -o \"$dir\\discord_rpc.tar\" \"$dir\\discord_rpc.distro\"",
            "brotli -d -j -o \"$dir\\discord_erlpack.tar\" \"$dir\\discord_erlpack.distro\"",
            "brotli -d -j -o \"$dir\\discord_desktop_core.tar\" \"$dir\\discord_desktop_core.distro\"",
            "brotli -d -j -o \"$dir\\discord_overlay2.tar\" \"$dir\\discord_overlay2.distro\"",
            "brotli -d -j -o \"$dir\\discord_sekrit.tar\" \"$dir\\discord_sekrit.distro\"",
            "brotli -d -j -o \"$dir\\discord_game_utils.tar\" \"$dir\\discord_game_utils.distro\"",
            "brotli -d -j -o \"$dir\\discord_modules.tar\" \"$dir\\discord_modules.distro\"",
            "brotli -d -j -o \"$dir\\discord_dispatch.tar\" \"$dir\\discord_dispatch.distro\"",
            "brotli -d -j -o \"$dir\\discord_spellcheck.tar\" \"$dir\\discord_spellcheck.distro\"",
            "brotli -d -j -o \"$dir\\discord_utils.tar\" \"$dir\\discord_utils.distro\"",
            "# Extract",
            "Expand-7zipArchive \"$dir\\discord_krisp.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_krisp-1\\discord_krisp\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_hook.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_hook-1\\discord_hook\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_zstd.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_zstd-1\\discord_zstd\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_notifications.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_notifications-1\\discord_notifications\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_voice.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_voice-1\\discord_voice\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_desktop_overlay.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_desktop_overlay-1\\discord_desktop_overlay\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_media.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_media-1\\discord_media\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_cloudsync.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_cloudsync-1\\discord_cloudsync\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_vigilante.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_vigilante-1\\discord_vigilante\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_voice_filters.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_voice_filters-1\\discord_voice_filters\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_rpc.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_rpc-1\\discord_rpc\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_erlpack.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_erlpack-1\\discord_erlpack\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_desktop_core.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_desktop_core-1\\discord_desktop_core\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_overlay2.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_overlay2-1\\discord_overlay2\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_sekrit.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_sekrit-1\\discord_sekrit\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_game_utils.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_game_utils-1\\discord_game_utils\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_modules.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_modules-1\\discord_modules\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_dispatch.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_dispatch-1\\discord_dispatch\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_spellcheck.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_spellcheck-1\\discord_spellcheck\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_utils.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_utils-1\\discord_utils\" -Removal | Out-Null",
            "# Update installer.db to disable required_update",
            "$sql_object = sqlite3 \"$dir\\installer.db\" \"SELECT value FROM key_values WHERE key = 'latest/host/app/stable/win/x64'\" | ConvertFrom-Json",
            "$sql_object.required_update = 'False'",
            "$sql_json = $sql_object | ConvertTo-Json -Depth 99 -Compress",
            "sqlite3 \"$dir\\installer.db\" \"UPDATE key_values SET value = '$sql_json' WHERE key = 'latest/host/app/stable/win/x64'\" | Out-Null",
            "# Create Symlink to $dir/app-9.9.9999",
            "New-Item \"$dir\\app-9.9.9999\" -ItemType SymbolicLink -Value \"$dir\\app-$version\" -Force | Out-Null"
        ]
    },
    "shortcuts": [
        [
            "app-9.9.9999\\Discord.exe",
            "Discord"
        ]
    ],
    "checkver": {
        "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
        "jsonpath": "$.full.url",
        "regex": "x64/(\\d.+)/"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": [
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/DiscordSetup.exe#/dl.7z",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_krisp/1/full.distro#/discord_krisp.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_hook/1/full.distro#/discord_hook.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_zstd/1/full.distro#/discord_zstd.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_notifications/1/full.distro#/discord_notifications.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_voice/1/full.distro#/discord_voice.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_desktop_overlay/1/full.distro#/discord_desktop_overlay.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_media/1/full.distro#/discord_media.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_cloudsync/1/full.distro#/discord_cloudsync.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_vigilante/1/full.distro#/discord_vigilante.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_voice_filters/1/full.distro#/discord_voice_filters.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_rpc/1/full.distro#/discord_rpc.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_erlpack/1/full.distro#/discord_erlpack.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_desktop_core/1/full.distro#/discord_desktop_core.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_overlay2/1/full.distro#/discord_overlay2.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_sekrit/1/full.distro#/discord_sekrit.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_game_utils/1/full.distro#/discord_game_utils.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_modules/1/full.distro#/discord_modules.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_dispatch/1/full.distro#/discord_dispatch.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_spellcheck/1/full.distro#/discord_spellcheck.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_utils/1/full.distro#/discord_utils.distro"
                ]
            }
        },
        "hash": [
            {
                "mode": "download"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_krisp.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_hook.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_zstd.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_notifications.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_voice.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_desktop_overlay.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_media.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_cloudsync.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_vigilante.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_voice_filters.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_rpc.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_erlpack.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_desktop_core.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_overlay2.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_sekrit.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_game_utils.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_modules.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_dispatch.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_spellcheck.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_utils.full.package_sha256"
            }
        ]
    }
}
