{
    "version": "1.0.9206",
    "description": "Free Voice and Text Chat",
    "homepage": "https://discordapp.com/",
    "license": {
        "identifier": "Freeware",
        "url": "https://discordapp.com/terms"
    },
    "notes": "This manifest works around the broken Discord Updater since version 1.0.9205 by manually installing all modules.",
    "depends": [
        "brotli",
        "sqlite"
    ],
    "architecture": {
        "64bit": {
            "url": [
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9206/DiscordSetup.exe#/dl.7z",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9206/discord_krisp/1/full.distro#/discord_krisp.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9206/discord_hook/1/full.distro#/discord_hook.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9206/discord_zstd/1/full.distro#/discord_zstd.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9206/discord_notifications/1/full.distro#/discord_notifications.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9206/discord_voice/1/full.distro#/discord_voice.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9206/discord_desktop_overlay/1/full.distro#/discord_desktop_overlay.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9206/discord_media/1/full.distro#/discord_media.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9206/discord_cloudsync/1/full.distro#/discord_cloudsync.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9206/discord_vigilante/1/full.distro#/discord_vigilante.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9206/discord_voice_filters/1/full.distro#/discord_voice_filters.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9206/discord_rpc/1/full.distro#/discord_rpc.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9206/discord_erlpack/1/full.distro#/discord_erlpack.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9206/discord_desktop_core/1/full.distro#/discord_desktop_core.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9206/discord_overlay2/1/full.distro#/discord_overlay2.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9206/discord_sekrit/1/full.distro#/discord_sekrit.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9206/discord_game_utils/1/full.distro#/discord_game_utils.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9206/discord_modules/1/full.distro#/discord_modules.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9206/discord_dispatch/1/full.distro#/discord_dispatch.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9206/discord_spellcheck/1/full.distro#/discord_spellcheck.distro",
                "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9206/discord_utils/1/full.distro#/discord_utils.distro"
            ],
            "hash": [
                "1c579e5190fd8319d8f0124904265eaa37c4bb501291389f89aea092e4dd2ea9",
                "b6b96d787c025f3c9b4d8b163c1d114e0ac30037b64ea76bea9c833b6cc439cb",
                "11aa36cbc8fc881c9e6ca078e0c94199f473e57e97e52f354b44265cfd15570f",
                "ce5813a6196b1bc1cb67d45c7182dace45dd253ab50b72d841a6b7383d1bf314",
                "560b0d1c6ada68f1c2744b482fd834b2a4c4a078f008a87290c2bf195a83e6b8",
                "7625cfb6877a513d82177e3e6c63ecba13a883bbb97387be3483cd045724703f",
                "05d1ae3c727bc5162235e79a8c516b764da6ba22c581391fd9d85621953391a5",
                "772ede26cd209632b2f08b9aa7d014cae0efd44bb8bd34bec0fb38504cba693c",
                "bd136aa5b4e13c9d2476943ac4eabf9212f90fd4ee501b6ba9077d4448eba932",
                "7cf0fa1f4f0b8272288f7dace6bc5204c336f37dce216449822edb177249dafa",
                "48e2b61fde27c295174c9db31d19557282644d96b3f3c136e6b786b6eab8a0c1",
                "a452986c48566cd60830544b512fbd9add7fc309d9ad026cd6c17ee2ee989e5e",
                "c037ab6779b6e8f46dc141f264803de5f8774bbaf01e0451e5bca51c57cfdc0b",
                "8f665f506786c59bb7e5beaf9730ed9b2aac250381df0a12e1c4d015032dd0b8",
                "6092cbb09973405c3c4925e68decc0a2fcada060bade31d35cc5f887a0f2362e",
                "01bb4e13735dcd844dc4cfa566d6f3b053f56e4bc60cb38c8492651026ced1ef",
                "e89b6455a2a3098bfde0ce2058383b8ee55c30da605c33cb7d8786c1e499d90b",
                "1a93dcb6237b64d4334cf5ae7e1be75d72f0041430a51c08fa55ee1a8365e450",
                "3571af9558915bad3cf38b4bb7698f2b86fc6f2bbf3f00fb6635d0adff00db2c",
                "fbfe661e2ab72be8f6e363133bae59a226e84ac8de66183d9a12c266b4fabe31",
                "b07900b3affa89a926feeff9948d718bbbbcfa48724619a22e4fb31b78764196"
            ]
        }
    },
    "extract_to": "_tmp",
    "installer": {
        "script": [
            "# Expand Archive",
            "Expand-7zipArchive \"$dir\\_tmp\\Discord-*-full.nupkg\" -ExtractDir \"lib\\net45\" -DestinationPath \"$dir\\app-$version\" -Removal | Out-Null",
            "Remove-Item \"$dir\\_tmp\" -Force -Recurse",
            "# Move installer.db file",
            "Move-Item \"$dir\\app-$version\\installer.db\" -Destination \"$dir\\installer.db\"",
            "# Decompress",
            "brotli -d -j -o \"$dir\\discord_krisp.tar\" \"$dir\\discord_krisp.distro\"",
            "brotli -d -j -o \"$dir\\discord_hook.tar\" \"$dir\\discord_hook.distro\"",
            "brotli -d -j -o \"$dir\\discord_zstd.tar\" \"$dir\\discord_zstd.distro\"",
            "brotli -d -j -o \"$dir\\discord_notifications.tar\" \"$dir\\discord_notifications.distro\"",
            "brotli -d -j -o \"$dir\\discord_voice.tar\" \"$dir\\discord_voice.distro\"",
            "brotli -d -j -o \"$dir\\discord_desktop_overlay.tar\" \"$dir\\discord_desktop_overlay.distro\"",
            "brotli -d -j -o \"$dir\\discord_media.tar\" \"$dir\\discord_media.distro\"",
            "brotli -d -j -o \"$dir\\discord_cloudsync.tar\" \"$dir\\discord_cloudsync.distro\"",
            "brotli -d -j -o \"$dir\\discord_vigilante.tar\" \"$dir\\discord_vigilante.distro\"",
            "brotli -d -j -o \"$dir\\discord_voice_filters.tar\" \"$dir\\discord_voice_filters.distro\"",
            "brotli -d -j -o \"$dir\\discord_rpc.tar\" \"$dir\\discord_rpc.distro\"",
            "brotli -d -j -o \"$dir\\discord_erlpack.tar\" \"$dir\\discord_erlpack.distro\"",
            "brotli -d -j -o \"$dir\\discord_desktop_core.tar\" \"$dir\\discord_desktop_core.distro\"",
            "brotli -d -j -o \"$dir\\discord_overlay2.tar\" \"$dir\\discord_overlay2.distro\"",
            "brotli -d -j -o \"$dir\\discord_sekrit.tar\" \"$dir\\discord_sekrit.distro\"",
            "brotli -d -j -o \"$dir\\discord_game_utils.tar\" \"$dir\\discord_game_utils.distro\"",
            "brotli -d -j -o \"$dir\\discord_modules.tar\" \"$dir\\discord_modules.distro\"",
            "brotli -d -j -o \"$dir\\discord_dispatch.tar\" \"$dir\\discord_dispatch.distro\"",
            "brotli -d -j -o \"$dir\\discord_spellcheck.tar\" \"$dir\\discord_spellcheck.distro\"",
            "brotli -d -j -o \"$dir\\discord_utils.tar\" \"$dir\\discord_utils.distro\"",
            "# Extract",
            "Expand-7zipArchive \"$dir\\discord_krisp.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_krisp-1\\discord_krisp\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_hook.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_hook-1\\discord_hook\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_zstd.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_zstd-1\\discord_zstd\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_notifications.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_notifications-1\\discord_notifications\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_voice.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_voice-1\\discord_voice\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_desktop_overlay.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_desktop_overlay-1\\discord_desktop_overlay\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_media.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_media-1\\discord_media\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_cloudsync.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_cloudsync-1\\discord_cloudsync\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_vigilante.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_vigilante-1\\discord_vigilante\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_voice_filters.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_voice_filters-1\\discord_voice_filters\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_rpc.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_rpc-1\\discord_rpc\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_erlpack.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_erlpack-1\\discord_erlpack\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_desktop_core.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_desktop_core-1\\discord_desktop_core\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_overlay2.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_overlay2-1\\discord_overlay2\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_sekrit.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_sekrit-1\\discord_sekrit\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_game_utils.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_game_utils-1\\discord_game_utils\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_modules.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_modules-1\\discord_modules\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_dispatch.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_dispatch-1\\discord_dispatch\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_spellcheck.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_spellcheck-1\\discord_spellcheck\" -Removal | Out-Null",
            "Expand-7zipArchive \"$dir\\discord_utils.tar\" -ExtractDir \"files\" -DestinationPath \"$dir\\app-$version\\modules\\discord_utils-1\\discord_utils\" -Removal | Out-Null",
            "# Update installer.db to disable required_update",
            "$sql_object = sqlite3 \"$dir\\installer.db\" \"SELECT value FROM key_values WHERE key = 'latest/host/app/stable/win/x64'\" | ConvertFrom-Json",
            "$sql_object.required_update = 'False'",
            "$sql_json = $sql_object | ConvertTo-Json -Depth 99 -Compress",
            "sqlite3 \"$dir\\installer.db\" \"UPDATE key_values SET value = '$sql_json' WHERE key = 'latest/host/app/stable/win/x64'\" | Out-Null",
            "# Disable updates",
            "$build_info = Get-Content \"$dir\\app-$version\\resources\\build_info.json\" -Raw | ConvertFrom-Json",
            "$build_info.version = '9.9.9999'",
            "$build_info | ConvertTo-Json -Depth 99 | Out-File \"$dir\\app-$version\\resources\\build_info.json\"",
            "# Create Symlink to $dir/app-9.9.9999",
            "New-Item \"$dir\\app-9.9.9999\" -ItemType SymbolicLink -Value \"$dir\\app-$version\" -Force | Out-Null"
        ]
    },
    "shortcuts": [
        [
            "app-9.9.9999\\Discord.exe",
            "Discord"
        ]
    ],
    "checkver": {
        "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
        "jsonpath": "$.full.url",
        "regex": "x64/(\\d.+)/"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": [
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/DiscordSetup.exe#/dl.7z",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_krisp/1/full.distro#/discord_krisp.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_hook/1/full.distro#/discord_hook.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_zstd/1/full.distro#/discord_zstd.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_notifications/1/full.distro#/discord_notifications.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_voice/1/full.distro#/discord_voice.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_desktop_overlay/1/full.distro#/discord_desktop_overlay.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_media/1/full.distro#/discord_media.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_cloudsync/1/full.distro#/discord_cloudsync.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_vigilante/1/full.distro#/discord_vigilante.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_voice_filters/1/full.distro#/discord_voice_filters.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_rpc/1/full.distro#/discord_rpc.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_erlpack/1/full.distro#/discord_erlpack.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_desktop_core/1/full.distro#/discord_desktop_core.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_overlay2/1/full.distro#/discord_overlay2.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_sekrit/1/full.distro#/discord_sekrit.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_game_utils/1/full.distro#/discord_game_utils.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_modules/1/full.distro#/discord_modules.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_dispatch/1/full.distro#/discord_dispatch.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_spellcheck/1/full.distro#/discord_spellcheck.distro",
                    "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$version/discord_utils/1/full.distro#/discord_utils.distro"
                ]
            }
        },
        "hash": [
            {
                "mode": "download"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_krisp.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_hook.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_zstd.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_notifications.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_voice.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_desktop_overlay.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_media.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_cloudsync.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_vigilante.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_voice_filters.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_rpc.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_erlpack.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_desktop_core.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_overlay2.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_sekrit.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_game_utils.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_modules.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_dispatch.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_spellcheck.full.package_sha256"
            },
            {
                "url": "https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch=x64",
                "jsonpath": "$.modules.discord_utils.full.package_sha256"
            }
        ]
    }
}
